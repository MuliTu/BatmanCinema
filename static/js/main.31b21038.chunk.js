(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){},36:function(e,t,n){e.exports=n(60)},41:function(e,t,n){},42:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),o=n.n(i),c=(n(41),n(9)),l=n(10),u=n(12),s=n(11),p=n(13),d=(n(42),n(3)),m=n(17),v=n.n(m),f=n(7),E=n(23),h="".concat("https://www.omdbapi.com","/").concat("?apikey=d6057e8"),b=function(){var e=Object(E.a)(v.a.mark(function e(t){var n,a,r,i,o,c,l,u,s,p,d;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"&t=").concat(t.Title,"&plot=full"));case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,r=a.Title,i=a.Genre,o=a.Director,c=a.Runtime,l=a.Year,u=a.imdbID,s=a.Type,p=a.Plot,d=a.Poster,e.next=17,{poster:d,title:r,genre:i,director:o,runtime:c,year:l,id:u,type:s.split("")[0].toUpperCase()+s.slice(1).toLowerCase(),plot:p};case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),y=function(){return function(e){return e({type:"DELETE_MOVIE"})}},O=function(e){return function(t){return t({type:"CURRENT_MOVIE",payload:e})}},g=function(){return function(e){e({type:"ADD_MOVIE",payload:{id:1e3*Math.random(),poster:"https://i.etsystatic.com/18278551/d/il/703690/1607402502/il_340x270.1607402502_69zh.jpg?",title:"Title",genre:"Genre",director:"Director",runtime:"120 Min",year:"1970",type:"type",plot:"Plot"}})}},j=n(8),C=n(2),M="ADD_MOVIE",N="DELETE_MOVIE",w="GET_MOVIES",x="CURRENT_MOVIE",I="SAVE_EDITED_MOVIE",U="DELETE_NEW_MOVIE",k={list:[],currentMovieIndex:0,currentMovie:{}};var V="OPEN",D="CLOSE",T={isOpen:!1,type:""};var _=Object(j.c)({movie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(C.a)({},e,{list:t.payload});case N:return Object(C.a)({},e,{list:[].concat(Object(f.a)(e.list.slice(0,e.currentMovieIndex)),Object(f.a)(e.list.slice(e.currentMovieIndex+1,e.list.length)))});case x:return Object(C.a)({},e,{currentMovieIndex:t.payload,currentMovie:e.list[t.payload]});case M:return Object(C.a)({},e,{list:[t.payload].concat(Object(f.a)(e.list))});case I:var n=e.list.slice();return n[e.currentMovieIndex]=t.payload,Object(C.a)({},e,{list:Object(f.a)(n)});case U:return Object(C.a)({},e,{list:Object(f.a)(e.list.slice(1))});default:return e}},popUp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return Object(C.a)({},e,{isOpen:!0,type:t.payload});case D:return Object(C.a)({},e,{isOpen:!1});default:return e}}}),P=function(e){return function(e){return function(e){return e.list}(e)}(e.movie)},S=function(e){return function(e){return function(e){return e.currentMovie}(e)}(e.movie)},A=function(e){return function(e){return function(e){return e.list.map(function(e){return e.title})}(e)}(e.movie)},H=function(e){return function(e){return function(e){return e.isOpen}(e)}(e.popUp)},L=function(e){return function(e){return function(e){return e.type}(e)}(e.popUp)},R=(n(49),function(e){var t=e.path;return r.a.createElement("div",{className:"poster-wrapper"},r.a.createElement("img",{className:"poster",src:t,height:290,alt:"poster"}))}),B=(n(27),function(e){var t=e.movie;return r.a.createElement("div",{className:"container"},r.a.createElement(R,{path:t.poster}),r.a.createElement("div",{className:"info"},r.a.createElement("div",{className:"title"},t.title,r.a.createElement("div",{className:"id"},"(",t.id,")")),r.a.createElement("div",{className:"genre"},t.genre),r.a.createElement("hr",null),r.a.createElement("div",{className:"information"},r.a.createElement("div",null,t.type),r.a.createElement("div",null,t.year),r.a.createElement("div",null,t.runtime)),r.a.createElement("div",{className:"main"},r.a.createElement("div",{className:"plot"},t.plot),r.a.createElement("hr",null),r.a.createElement("div",{className:"director"},"Director: ",t.director))))}),G=(n(50),function(e){var t=e.label,n=e.onClick,a=e.disable,i=void 0!==a&&a;return r.a.createElement("button",{className:"button",disabled:i,onClick:n},t)}),F=function(e){return function(t){t({type:"OPEN",payload:e})}},z=function(){return function(e){e({type:"CLOSE"})}},J=(n(51),function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).movieListEntity=function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(G,{label:"Delete",onClick:function(){return n.props.popUpFunction(t,"delete")}}),r.a.createElement(G,{label:"Edit",onClick:function(){return n.props.popUpFunction(t,"edit")}}),r.a.createElement(B,{movie:e,editMode:!0}))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMoviesBySearch("Batman")}},{key:"render",value:function(){return r.a.createElement("div",{className:"box-order"},this.props.movies.map(this.movieListEntity))}}]),t}(r.a.Component)),W=Object(d.b)(function(e){return{movies:P(e)}},{fetchMoviesBySearch:function(e){return function(){var t=Object(E.a)(v.a.mark(function t(n){var a,r,i,o;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="".concat(h,"&s=").concat(e.replace(" ","+")),t.next=3,fetch(a);case 3:return r=t.sent,t.next=6,r.json();case 6:i=t.sent,o=Object(f.a)(i.Search),Promise.all(o.map(b)).then(function(e){return n({type:"GET_MOVIES",payload:e})});case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getMovies:P,setMovieIndex:O,deleteMovie:y,openPopUp:F,addMovie:g})(J),Y=n(34),Z=Object(d.b)(null,{deleteMovie:y,closePopUp:z})(function(e){var t=e.deleteMovie,n=e.closePopUp;return r.a.createElement("div",null,r.a.createElement("p",null,"Do you really want to delete this movie?"),r.a.createElement(G,{label:"Yes",onClick:function(){n(),t()}}),r.a.createElement(G,{label:"Cancel",onClick:n}))}),q=n(19),K=function(e){return e.length<=0?{border:"solid 1px red"}:{border:"solid 1px green"}},Q=function(e){return e.replace(/[^a-zA-Z0-9 ]/g,"").split(" ").map(function(e){return e.slice().charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join(" ")},X=function(e,t){return!t.some(function(t){return t===e})},$=function(e,t){return e===t},ee=(n(57),function(e){var t=e.isValid,n=e.text;return r.a.createElement("div",{className:"error"},t?n:"")}),te=(n(58),function(e){function t(e){var n;return Object(c.a)(this,t),console.log("props",e),(n=Object(u.a)(this,Object(s.a)(t).call(this,e))).onChangeHandler=function(e,t){return n.setState({movie:Object(C.a)({},n.state.movie,Object(q.a)({},t,e))})},n.onChangeTitleHandler=function(e,t){var a=Q(e),r=X(a,n.props.list),i=$(a,n.state.oldTitle);n.setState({isValid:i||r}),n.onChangeHandler(a,t)},n.state={movie:{poster:e.movie.poster,title:e.movie.title,id:e.movie.id,year:e.movie.year,plot:e.movie.plot,genre:e.movie.genre,runtime:e.movie.runtime,director:e.movie.director,type:e.movie.type},oldTitle:e.movie.title,isValid:!0,isNew:e.isNew},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.state.movie,n=t.title,a=t.id,i=t.year,o=t.plot,c=t.genre,l=t.runtime,u=t.poster,s=t.director,p=t.type,d=this.state.isNew;return r.a.createElement("div",{className:"container"},r.a.createElement("div",null,r.a.createElement(R,{path:u}),r.a.createElement("input",{value:u,onChange:function(t){return e.onChangeHandler(t.target.value,"poster")},style:K(u)})),r.a.createElement("div",{className:"info"},r.a.createElement("input",{className:"title",value:n,onChange:function(t){return e.onChangeTitleHandler(t.target.value,"title")},style:K(n)}),r.a.createElement(ee,{isValid:!this.state.isValid,text:"Title is already exist"}),r.a.createElement("input",{className:"id",value:a,disabled:!0}),r.a.createElement("input",{className:"genre",value:c,onChange:function(t){return e.onChangeHandler(t.target.value,"genre")},style:K(c)}),r.a.createElement("hr",null),r.a.createElement("div",{className:"information"},r.a.createElement("input",{value:p,onChange:function(t){return e.onChangeHandler(t.target.value,"type")},style:K(p)}),r.a.createElement("input",{value:i,type:"number",min:1950,max:2019,onChange:function(t){return e.onChangeHandler(t.target.value,"year")},style:K(i)}),r.a.createElement("input",{value:l.split(" ")[0],type:"number",onChange:function(t){return e.onChangeHandler(t.target.value,"runtime")},style:K(l)})," Min"),r.a.createElement("div",{className:"main"},r.a.createElement("textarea",{className:"plot",value:o,onChange:function(t){return e.onChangeHandler(t.target.value,"plot")},style:K(o)}),r.a.createElement("input",{className:"director",value:s,onChange:function(t){return e.onChangeHandler(t.target.value,"director")},style:K(s)}))),r.a.createElement(G,{label:"Save",onClick:function(){e.props.saveEditedMovie(e.state.movie),e.props.closePopUp()},disable:!this.state.isValid}),d?r.a.createElement(G,{label:"Cancel",onClick:function(){e.props.deleteNewMovie(),e.props.closePopUp()}}):r.a.createElement(G,{label:"Cancel",onClick:this.props.closePopUp}))}}]),t}(r.a.Component)),ne=Object(d.b)(function(e){return{movie:S(e),list:A(e)}},{closePopUp:z,saveEditedMovie:function(e){return function(t){return t({type:"SAVE_EDITED_MOVIE",payload:e})}},deleteNewMovie:function(){return function(e){return e({type:"DELETE_NEW_MOVIE"})}}})(te),ae={margin:"auto",position:"absolute",top:"0",left:"0",right:"0",border:"solid thin white",borderRadius:"10px",textAlign:"center",color:"white"},re={modal:Object(C.a)({},ae,{background:"rgba(46, 49, 49, 0.5)",height:"auto"})},ie=(n(59),Object(d.b)(function(e){return{popUpState:H(e),type:L(e)}},{closePopUp:z})(function(e){e.children;var t=e.popUpState,n=e.type,a=e.closePopUp,i=function(e){switch(e){case"delete":return{style:{modal:Object(C.a)({},ae,{background:"rgba(255,0,0, 0.7)",height:"100px"})},component:r.a.createElement(Z,null)};case"add":return{style:re,component:r.a.createElement(ne,{isNew:!0})};case"edit":return{style:re,component:r.a.createElement(ne,{isNew:!1})};default:return"null"}}(n);return r.a.createElement(Y.a,{open:t,onClose:a,styles:i.style},i.component)})),oe=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).title="Batman Cinema",n.openModal=function(e,t){n.props.setMovieIndex(e),n.props.openPopUp(t)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null,this.title),r.a.createElement(G,{label:"Add",onClick:function(){e.props.addMovie(),e.openModal(0,"add")}}),r.a.createElement(ie,null),r.a.createElement(W,{popUpFunction:this.openModal}))}}]),t}(r.a.Component),ce=Object(d.b)(null,{addMovie:g,setMovieIndex:O,openPopUp:F})(oe),le=[n(33).a],ue=Object(j.d)(_,{},j.a.apply(void 0,le));o.a.render(r.a.createElement(d.a,{store:ue},r.a.createElement(ce,null)),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.31b21038.chunk.js.map